<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>EVIL LEAKER</title>
  <link rel="shortcut icon" href="https://oss.am-all.com.cn/asset/img/manual/common/site_logo.svg" />
  <link href="https://unpkg.com/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
  
  <!-- 核心样式 -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/spa.css">

  <!-- 功能模块样式 -->
  <link rel="stylesheet" href="css/auth.css">
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/cursor.css">
  <link rel="stylesheet" href="css/message.css">
  <link rel="stylesheet" href="css/emoji.css">
  <link rel="stylesheet" href="css/announcement.css">

  <!-- 业务功能样式 -->
  <link rel="stylesheet" href="css/fortune.css">
  <link rel="stylesheet" href="css/order.css">
  <link rel="stylesheet" href="css/dl.css">
  <link rel="stylesheet" href="css/ccb.css">
  <link rel="stylesheet" href="css/exchange.css">
  <link rel="stylesheet" href="css/tools.css">
  <link rel="stylesheet" href="css/friends.css">
  <link rel="stylesheet" href="css/minigame.css">

  <!-- 商店系统样式 -->
  <link rel="stylesheet" href="css/pointShop.css">
  <link rel="stylesheet" href="css/creditShop.css">
  <link rel="stylesheet" href="css/redemptionCode.css">

  <!-- 论坛系统样式 -->
  <link rel="stylesheet" href="css/forum.css">

  <!-- 补丁工具系统样式 -->
  <link rel="stylesheet" href="css/patcherTools.css">
  <link rel="stylesheet" href="css/patcherAdmin.css">

  <!-- 认证系统CSS -->
  <link rel="stylesheet" href="/css/verification.css">

  <!-- 管理后台样式 -->
  <link rel="stylesheet" href="css/dladmin.css">
  <link rel="stylesheet" href="css/siteAdmin.css">
  <link rel="stylesheet" href="css/userManager.css">
</head>
<body>

  <!-- 顶部导航栏 -->
  <nav class="top-navbar">
    <!-- 左侧区域 -->
    <div class="navbar-left">
      <!-- 移动端菜单按钮 -->
      <button class="mobile-toggle">
        <span class="hamburger-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
      
      <!-- PC端语言选择器 -->
      <div class="language-selector language-selector-pc">
        <button class="language-btn">
          <i class="fas fa-globe"></i>
          <span data-i18n="navbar.language">语言</span>
        </button>
        <div class="language-dropdown">
          <a href="?lang=zh-cn" class="language-item">中文</a>
          <a href="?lang=en-us" class="language-item">English</a>
          <a href="?lang=ja-jp" class="language-item">日本語</a>
        </div>
      </div>
    </div>
    
    <!-- 中央区域 -->
    <div class="navbar-center">
      <!-- 品牌标题 -->
      <div class="brand">
        <span data-i18n="navbar.brand">EVIL LEAKER</span>
      </div>
    </div>
    
    <!-- 右侧区域 -->
    <div class="navbar-right">
      <!-- 移动端控件容器 -->
      <div class="mobile-controls">
        <!-- 移动端消息图标占位符 -->
        <div id="mobile-message-placeholder"></div>
        
        <!-- 移动端语言选择器 -->
        <div class="language-selector language-selector-mobile">
          <button class="language-btn">
            <i class="fas fa-globe"></i>
          </button>
          <div class="language-dropdown">
            <a href="?lang=zh-cn" class="language-item">中文</a>
            <a href="?lang=en-us" class="language-item">English</a>
            <a href="?lang=ja-jp" class="language-item">日本語</a>
          </div>
        </div>
      </div>
      
      <!-- PC端用户区域容器 -->
      <div class="user-area-container">
        <!-- PC端消息图标占位符 -->
        <div id="pc-message-placeholder"></div>
        
        <!-- 用户区域 -->
        <div class="user-area" id="user-area-pc">
          <!-- 登录前 -->
          <div class="auth-links" id="auth-links-pc">
            <a href="#" data-page="login" data-i18n="user.login">登录</a>
            <span class="divider">/</span>
            <a href="#" data-page="register" data-i18n="user.register">注册</a>
          </div>
          
          <!-- 登录后 -->
          <div class="user-info" id="user-info-pc" style="display: none;">
            <img id="user-avatar-pc" class="user-avatar-pc" src="https://api.am-all.com.cn/avatars/default_avatar.png">
            <div class="user-basic-info">
              <span id="user-nickname-pc" class="user-nickname"></span>
              <span id="user-uid-pc" class="user-uid"></span>
            </div>
            <div class="user-dropdown">
              <div class="dropdown-rank">
                <span id="dropdown-rank"></span>
              </div>
              <div class="dropdown-special-rank">
                <i class="fas fa-crown me-2"></i>
                <span id="dropdown-special-rank"></span>
              </div>
              <div class="dropdown-auth">
                <i class="fas fa-certificate me-2"></i>
                <span id="dropdown-auth"></span>
              </div>
              <div class="dropdown-uid">
                <i class="fas fa-id-card me-2"></i>
                <span id="dropdown-uid"></span>
              </div>
              <div class="dropdown-points" id="dropdown-points">
                <i class="fas fa-coins me-2"></i><span data-i18n="user.points">积分</span>: <span id="dropdown-points-value">0</span>
              </div>
              <div class="dropdown-credit" id="dropdown-credit">
                <i class="fas fa-star me-2"></i><span data-i18n="user.credit">CREDIT</span>: <span id="dropdown-credit-value">0</span>
              </div>
              <a href="#" data-page="user-settings" data-i18n="user.settings">用户设置</a>
              <a href="#" id="logout-pc" data-i18n="user.logout">退出登录</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- 侧边栏 -->
  <div class="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-title"></span>
    </div>

    <div class="sidebar-user-area" id="user-area-mobile">
      <div class="auth-links" id="auth-links-mobile">
        <a href="#" data-page="login" class="mobile-auth-btn">
          <i class="fas fa-sign-in-alt me-2"></i>
          <span data-i18n="user.login">登录</span>
        </a>
        <a href="#" data-page="register" class="mobile-auth-btn">
          <i class="fas fa-user-plus me-2"></i>
          <span data-i18n="user.register">注册</span>
        </a>
      </div>
      
      <div class="user-info" id="user-info-mobile" style="display: none;">
        <div class="user-basic">
          <img id="user-avatar-mobile" class="user-avatar-mobile" src="https://api.am-all.com.cn/avatars/default_avatar.png">
          <div class="user-info-text">
            <div id="user-nickname-mobile" class="user-nickname"></div>
            <div id="user-email-mobile" class="user-email"></div>
            <div id="user-uid-mobile" class="user-uid"></div>
            <div id="user-points-mobile" class="user-points"></div>
          </div>
        </div>
        <div class="user-actions">
          <a href="#" data-page="user-settings" class="mobile-user-action-btn">
            <i class="fas fa-cog me-2"></i><span data-i18n="user.settings">用户设置</span>
          </a>
          <a href="#" id="logout-mobile" class="mobile-user-action-btn">
            <i class="fas fa-sign-out-alt me-2"></i><span data-i18n="user.logout">退出登录</span>
          </a>
        </div>
      </div>
    </div>

    <ul class="sidebar-nav">
      <li><a href="#" class="active" data-page="home">
        <i class="fas fa-home me-2"></i>
        <span data-i18n="sidebar.home">首页</span>
      </a></li>
      <li><a href="#" data-page="download">
        <i class="fas fa-download me-2"></i>
        <span data-i18n="sidebar.download">下载</span>
      </a></li>
      <li><a href="#" data-page="tools">
        <i class="fas fa-edit me-2"></i>
        <span data-i18n="sidebar.tools">实用工具</span>
      </a></li>
      <li><a href="#" data-page="dllpatcher">
        <i class="fas fa-plug me-2"></i>
        <span data-i18n="sidebar.patcher">补丁工具</span>
      </a></li>
      <li><a href="#" data-page="settings">
        <i class="fas fa-cog me-2"></i>
        <span data-i18n="sidebar.settings">设置</span>
      </a></li>
      <li><a href="#" data-page="user-verification" id="sidebar-user-verification" style="display: none;">
        <i class="fas fa-user-shield me-2"></i>
        <span data-i18n="sidebar.userVerification">账户认证</span>
      </a></li>
    </ul>

    <div class="sidebar-divider"></div>

    <div class="sidebar-section-title">
      <i class="fas fa-cogs"></i>
      <span data-i18n="sidebar.functions">功能</span>
    </div>

    <ul class="sidebar-nav">
      <li><a href="#" data-page="fortune">
        <i class="fas fa-star me-2"></i>
        <span data-i18n="sidebar.fortune">每日签到</span>
      </a></li>
      <li><a href="#" data-page="ccb" id="sidebar-ccb" style="display: none;">
        <i class="fas fa-search me-2"></i>
        <span data-i18n="sidebar.ccb">游戏查分</span>
      </a></li>
      <li><a href="#" data-page="forum" id="sidebar-forum" style="display: none;">
        <i class="fas fa-comments me-2"></i>
        <span data-i18n="sidebar.forum">交流区</span>
      </a></li>
      <li><a href="#" data-page="exchange" id="sidebar-exchange" style="display: none;">
        <i class="fas fa-exchange-alt me-2"></i>
        <span data-i18n="sidebar.exchange">兑换码</span>
      </a></li>
      <li><a href="#" data-page="point-shop" id="sidebar-point-shop" style="display: none;">
        <i class="fas fa-store me-2"></i>
        <span data-i18n="sidebar.pointShop">积分商店</span>
      </a></li>
	  <li><a href="#" data-page="minigame" id="sidebar-minigame" style="display: none;">
        <i class="fas fa-gamepad me-2"></i>
        <span data-i18n="sidebar.minigame">迷你游戏</span>
      </a></li>
    </ul>

    <div class="sidebar-divider"></div>

    <div class="sidebar-section-title" id="admin-section-title" style="display: none;">
      <i class="fas fa-shield-alt"></i>
      <span data-i18n="sidebar.admin">管理</span>
    </div>

    <ul class="sidebar-nav" id="admin-section-nav" style="display: none;">
      <li><a href="#" data-page="user-manager" id="sidebar-user-manager" style="display: none;">
        <i class="fas fa-users me-2"></i>
        <span data-i18n="sidebar.userManager">用户管理</span>
      </a></li>
      <li><a href="#" data-page="announcement-admin" id="sidebar-announcement-admin" style="display: none;">
        <i class="fas fa-bullhorn me-2"></i>
        <span data-i18n="sidebar.announcementAdmin">公告管理</span>
      </a></li>
      <li><a href="#" data-page="site-admin" id="sidebar-site-admin" style="display: none;">
        <i class="fas fa-cogs me-2"></i>
        <span data-i18n="sidebar.siteAdmin">网站管理</span>
      </a></li>
      <li><a href="#" data-page="forum-admin" id="sidebar-forum-admin" style="display: none;">
        <i class="fas fa-toolbox me-2"></i>
        <span data-i18n="sidebar.forumAdmin">论坛管理</span>
      </a></li>
      <li><a href="#" data-page="download-admin" id="sidebar-download-admin" style="display: none;">
        <i class="fas fa-download me-2"></i>
        <span data-i18n="sidebar.downloadAdmin">下载管理</span>
      </a></li>
      <li><a href="#" data-page="verification-admin" id="sidebar-verification-admin" style="display: none;">
        <i class="fas fa-tasks me-2"></i>
        <span data-i18n="sidebar.verificationAdmin">认证申请管理</span>
      </a></li>
      <li><a href="#" data-page="points-shop-admin" id="sidebar-points-shop-admin" style="display: none;">
        <i class="fas fa-coins me-2"></i>
        <span data-i18n="sidebar.pointsShopAdmin">积分商品管理</span>
      </a></li>
      <li><a href="#" data-page="point2-shop-admin" id="sidebar-point2-shop-admin" style="display: none;">
        <i class="fas fa-dove me-2"></i>
        <span data-i18n="sidebar.point2ShopAdmin">鸽屋积分商品管理</span>
      </a></li>
      <li><a href="#" data-page="credit-shop-admin" id="sidebar-credit-shop-admin" style="display: none;">
        <i class="fas fa-star me-2"></i>
        <span data-i18n="sidebar.creditShopAdmin">CREDIT点数商品管理</span>
      </a></li>
      <li><a href="#" data-page="order-entry" id="sidebar-order-entry" style="display: none;">
        <i class="fas fa-file-invoice me-2"></i>
        <span data-i18n="sidebar.orderEntry">订单录入</span>
      </a></li>
    </ul>

    <div class="sidebar-divider"></div>
  </div>
  
  <div class="main-content" id="content-container">
    <div class="section">
      <h1 class="page-title" data-i18n="home.title">首页</h1>
      <p data-i18n="home.selectFunction">请从左侧菜单选择功能</p>
      <div class="alert alert-info mt-4">
        <i class="fas fa-info-circle me-2"></i>
        <span data-i18n="common.loading">Loading...</span>
      </div>
    </div>
  </div>

  <div class="spa-loader">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  
  <!-- 外部库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
  
  <!-- OCR识别库 -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

  <!-- 1. 基础框架和核心功能 -->
  <script defer src="js/language.js"></script>
  <script defer src="js/shims.js"></script>

  <!-- 2. 基础UI组件 -->
  <script defer src="js/cursor.js"></script>
  <script defer src="js/announcement.js"></script>

  <!-- 3. 表情缓存系统（合并版）-->
  <script defer src="js/emoji-cache.js"></script>

  <!-- 4. 表情系统（合并版）-->
  <script defer src="js/emoji.js"></script>

  <!-- 5. 消息系统 -->
  <script defer src="js/message.js"></script>
  <script defer src="js/message-center.js"></script>
  <script defer src="js/messageAdmin.js"></script>
  <script defer src="js/message-fix.js"></script>

  <!-- 6. 社交功能 -->
  <script defer src="js/friends.js"></script>
  
  <!-- 用户信息更新器 -->
  <script defer src="js/userInfoUpdater.js"></script>

  <!-- 7. 业务功能模块 -->
  <script defer src="js/dl.js"></script>
  <script defer src="js/scanner-functions.js"></script>
  <script defer src="js/ccb.js"></script>
  <script defer src="js/exchange.js"></script>
  <script defer src="js/datacenter.js"></script>
  <script defer src="js/fortune.js"></script>
  <script defer src="js/toolsManage.js"></script>
  <script defer src="js/toolsDisplay.js"></script>
  <script defer src="js/minigame.js"></script>

  <!-- 8. 商店系统 -->
  <script defer src="js/pointShop.js"></script>
  <script defer src="js/creditShop.js"></script>
  <script defer src="js/redemptionCode.js"></script>

  <!-- 9. 论坛系统 -->
  <script defer src="js/forum-editor.js"></script>
  <script defer src="js/forum.js"></script>
  <script defer src="js/forum-admin.js"></script>

  <!-- 10. 补丁工具系统 -->
  <script defer src="js/patcherTools.js"></script>
  <script defer src="js/patcherAdmin.js"></script>

  <!-- 11. 管理后台 -->
  <script defer src="js/dladmin.js"></script>
  <script defer src="js/userManager.js"></script>
  <script defer src="js/siteAdmin.js"></script>

  <!-- 12. 认证系统JavaScript -->
  <!-- 12. 认证系统JavaScript -->
  <script defer src="js/verification.js"></script>
  <script defer src="js/verification-management.js"></script>
  <script defer src="js/verification-admin.js"></script>
  <script defer src="js/verification-home-ads.js"></script>
  <!-- 13. SPA路由（最后加载） -->
  <script defer src="js/spa.js"></script>
  <script defer src="js/spa_pages.js"></script>

  <!-- 14. 移动端优化 -->
  <script defer src="js/mobile-sidebar.js"></script>
  
  <!-- 页面加载完成后初始化语言 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 监听页面内容更新事件，自动更新翻译
      window.addEventListener('pageLoaded', function() {
        if (typeof languageModule !== 'undefined' && languageModule.updateTranslations) {
          setTimeout(function() {
            languageModule.updateTranslations();
          }, 100);
        }
      });
      
      // 监听SPA页面切换事件
      window.addEventListener('contentUpdated', function() {
        if (typeof languageModule !== 'undefined' && languageModule.updateTranslations) {
          languageModule.updateTranslations();
        }
      });
    });
  </script>
</body>
</html>